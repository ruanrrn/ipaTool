# é¡¹ç›®æ–‡æ¡£

## ğŸ“š æ–‡æ¡£ç›®å½•

### æ ¸å¿ƒæ–‡æ¡£

- **[æ•°æ®åº“æ¶æ„è¯´æ˜](./database-architecture.md)** - åŒå­˜å‚¨æ¨¡å¼ï¼ˆSQLite + JSONï¼‰çš„è¯¦ç»†è¯´æ˜
- **[ä¸‹è½½æµç¨‹æ”¹è¿›](./download-workflow-improvements.md)** - ä¸‹è½½é¡µé¢çš„è´¦å·éªŒè¯å’ŒåŒºåŸŸæ„ŸçŸ¥æœç´¢

### å¿«é€Ÿé“¾æ¥

- [é¡¹ç›® README](../README.md) - é¡¹ç›®æ¦‚è¿°å’Œå¿«é€Ÿå¼€å§‹
- [GitHub Issues](https://github.com/ruanrrn/ipaTool/issues) - é—®é¢˜åé¦ˆ
- [GitHub Discussions](https://github.com/ruanrrn/ipaTool/discussions) - è®¨è®ºäº¤æµ

---

## ğŸ” å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“ç›¸å…³

**Q: ipa-webtool.json æ–‡ä»¶æœ‰ä»€ä¹ˆç”¨ï¼Ÿ**

A: å®ƒæ˜¯å¤‡ç”¨å­˜å‚¨æ–¹æ¡ˆã€‚é¡¹ç›®ä½¿ç”¨åŒå­˜å‚¨æ¨¡å¼ï¼š
- **ä¸»å­˜å‚¨**ï¼šSQLite æ•°æ®åº“ï¼ˆé«˜æ€§èƒ½ã€å¹¶å‘å®‰å…¨ï¼‰
- **å¤‡ç”¨å­˜å‚¨**ï¼šJSON æ–‡ä»¶ï¼ˆå…¼å®¹æ€§å¥½ã€æ˜“äºè°ƒè¯•ï¼‰

å½“ SQLite ä¸å¯ç”¨æ—¶ï¼ˆå¦‚åŸç”Ÿæ¨¡å—æ„å»ºå¤±è´¥ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å›é€€åˆ° JSON æ–‡ä»¶å­˜å‚¨ã€‚

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ [æ•°æ®åº“æ¶æ„è¯´æ˜](./database-architecture.md)ã€‚

**Q: æ•°æ®å­˜å‚¨åœ¨å“ªé‡Œï¼Ÿ**

A: æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨ `server/data/` ç›®å½•ï¼š
- `ipa-webtool.db` - SQLite æ•°æ®åº“ï¼ˆä¸»å­˜å‚¨ï¼‰
- `ipa-webtool.json` - JSON å¤‡ç”¨å­˜å‚¨

### 2. ä¸‹è½½æµç¨‹ç›¸å…³

**Q: ä¸ºä»€ä¹ˆä¸‹è½½å‰å¿…é¡»å…ˆé€‰æ‹©è´¦å·ï¼Ÿ**

A: ä¸ºäº†ç¡®ä¿æœç´¢å’Œä¸‹è½½çš„åº”ç”¨ä¸è´¦å·åŒºåŸŸä¸€è‡´ï¼š
- CN è´¦å·åªèƒ½æœç´¢å’Œä¸‹è½½ CN å•†åº—çš„åº”ç”¨
- US è´¦å·åªèƒ½æœç´¢å’Œä¸‹è½½ US å•†åº—çš„åº”ç”¨
- é¿å…ä¸‹è½½å¤±è´¥æˆ–ä¸‹è½½é”™è¯¯ç‰ˆæœ¬

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ [ä¸‹è½½æµç¨‹æ”¹è¿›](./download-workflow-improvements.md)ã€‚

**Q: å¦‚ä½•åˆ‡æ¢è´¦å·åŒºåŸŸï¼Ÿ**

A: åœ¨ä¸‹è½½é¡µé¢åˆ‡æ¢è´¦å·å³å¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š
1. ä½¿ç”¨æ–°è´¦å·çš„åŒºåŸŸé‡æ–°æœç´¢åº”ç”¨
2. æ¸…ç©ºä¹‹å‰æŸ¥è¯¢çš„ç‰ˆæœ¬ä¿¡æ¯
3. æ˜¾ç¤ºå½“å‰æœç´¢åŒºåŸŸæç¤º

### 3. å®‰å…¨ç›¸å…³

**Q: å¯†ç æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Ÿ**

A: ä½¿ç”¨ AES-256-GCM åŠ å¯†ç®—æ³•ï¼š
- å¯†ç åœ¨åŠ å¯†åå­˜å‚¨åœ¨æ•°æ®åº“ä¸­
- åŠ å¯†å¯†é’¥è‡ªåŠ¨ç”Ÿæˆå¹¶å®šæœŸè½®æ¢ï¼ˆæ¯ 30 å¤©ï¼‰
- å‰ç«¯æ— æ³•è·å–æ˜æ–‡å¯†ç 

**Q: å¦‚ä½•æ‰‹åŠ¨è½®æ¢åŠ å¯†å¯†é’¥ï¼Ÿ**

A: å¯ä»¥é€šè¿‡ API è§¦å‘å¯†é’¥è½®æ¢ï¼š
```bash
# æŸ¥çœ‹å¯†é’¥ä¿¡æ¯
curl http://localhost:8080/api/keys/info

# æ‰‹åŠ¨è½®æ¢å¯†é’¥
curl -X POST http://localhost:8080/api/keys/rotate
```

---

## ğŸ› ï¸ æŠ€æœ¯ç»†èŠ‚

### åŒå­˜å‚¨æ¨¡å¼

é¡¹ç›®å®ç°äº†æ™ºèƒ½åŒå­˜å‚¨æ¨¡å¼ï¼Œä¼˜å…ˆä½¿ç”¨ SQLiteï¼Œåœ¨ SQLite ä¸å¯ç”¨æ—¶è‡ªåŠ¨å›é€€åˆ° JSON æ–‡ä»¶ã€‚

**ä¼˜åŠ¿**ï¼š
- âœ… é«˜æ€§èƒ½ï¼šSQLite æ”¯æŒç´¢å¼•å’Œå¤æ‚æŸ¥è¯¢
- âœ… å®¹é”™æœºåˆ¶ï¼šJSON æ–‡ä»¶ä½œä¸ºå¤‡ç”¨å­˜å‚¨
- âœ… æ•°æ®è¿ç§»ï¼šæ”¯æŒ SQLite â†” JSON äº’å¯¼
- âœ… å¼€å‘è°ƒè¯•ï¼šJSON æ ¼å¼æ˜“äºæŸ¥çœ‹å’Œç¼–è¾‘

### åŒºåŸŸè‡ªåŠ¨æ£€æµ‹

ç³»ç»Ÿæ ¹æ®é‚®ç®±åŸŸåè‡ªåŠ¨æ£€æµ‹è´¦å·åŒºåŸŸï¼š
- `@qq.com`, `@163.com`, `@126.com`, `@foxmail.com` â†’ CN
- `@icloud.com`, `@gmail.com`, `@yahoo.com` â†’ US
- å…¶ä»–é‚®ç®±é»˜è®¤ä¸º US

ç™»å½•æˆåŠŸåï¼Œç³»ç»Ÿä¼šæ ¹æ® Apple ID çš„å“åº”ä¿¡æ¯è°ƒæ•´åŒºåŸŸã€‚

### è´¦å·å‰ç½®éªŒè¯

ä¸‹è½½é¡µé¢å¼ºåˆ¶è¦æ±‚å…ˆé€‰æ‹©è´¦å·ï¼š
1. æœªç™»å½•æ—¶æ˜¾ç¤ºè­¦å‘Šå¹¶ç¦ç”¨æœç´¢
2. è‡ªåŠ¨é€‰æ‹©ç¬¬ä¸€ä¸ªå·²ç™»å½•è´¦å·
3. æ ¹æ®è´¦å·åŒºåŸŸè¿›è¡Œæœç´¢
4. åˆ‡æ¢è´¦å·æ—¶è‡ªåŠ¨æ›´æ–°æœç´¢åŒºåŸŸ

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æ“ä½œ | SQLite | JSON æ–‡ä»¶ |
|------|--------|-----------|
| è¯»å–æ‰€æœ‰è´¦å· | ~1ms | ~5ms |
| ä¿å­˜å•ä¸ªè´¦å· | ~2ms | ~10ms |
| æŸ¥è¯¢ç‰¹å®šè´¦å· | ~0.5ms | ~5ms |
| å¹¶å‘è®¿é—® | âœ… æ”¯æŒ | âŒ éœ€è¦é” |
| æ•°æ®é‡ > 1000 | âœ… æ€§èƒ½ç¨³å®š | âŒ æ€§èƒ½ä¸‹é™ |

---

## ğŸ”§ æ•…éšœæ’é™¤

### åŸç”Ÿæ¨¡å—æ„å»ºå¤±è´¥

```bash
# æ‰‹åŠ¨æ„å»º better-sqlite3
cd node_modules/better-sqlite3
npm run build-release
cd ../..
```

### æ•°æ®åº“é”™è¯¯

```bash
# åˆ é™¤æ•°æ®åº“æ–‡ä»¶é‡æ–°åˆå§‹åŒ–
rm -f server/data/ipa-webtool.db
# é‡å¯æœåŠ¡å™¨ä¼šè‡ªåŠ¨åˆ›å»ºæ–°çš„æ•°æ®åº“
```

### ç«¯å£è¢«å ç”¨

```bash
# æŸ¥æ‰¾å¹¶æ€æ­»å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -ti:8080 | xargs kill -9
```

---

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `src/components/` ä¸­åˆ›å»ºæˆ–ä¿®æ”¹ Vue ç»„ä»¶
2. åœ¨ `server/api/` ä¸­æ·»åŠ  API è·¯ç”±
3. åœ¨ `server/services/` ä¸­å®ç°ä¸šåŠ¡é€»è¾‘
4. æ›´æ–°ç›¸å…³æ–‡æ¡£

### ä»£ç è§„èŒƒ

- **Vue ç»„ä»¶**ï¼šä½¿ç”¨ Composition APIï¼ˆ`<script setup>`ï¼‰
- **JavaScript**ï¼šä½¿ç”¨ ES6+ è¯­æ³•
- **CSS**ï¼šä¼˜å…ˆä½¿ç”¨ Tailwind CSS ç±»
- **æäº¤ä¿¡æ¯**ï¼šéµå¾ª Conventional Commits è§„èŒƒ

---

## ğŸ“® è·å–å¸®åŠ©

- æŸ¥çœ‹ [å¸¸è§é—®é¢˜](#-å¸¸è§é—®é¢˜)
- æäº¤ [GitHub Issue](https://github.com/ruanrrn/ipaTool/issues)
- å‚ä¸ [GitHub Discussions](https://github.com/ruanrrn/ipaTool/discussions)
- æŸ¥çœ‹ [é¡¹ç›® README](../README.md)

---

**æœ€åæ›´æ–°**: 2025-02-08
